![...](..\..\TCP-IP%20API\机器人状态API\images\查询机器人导航状态.001.png)

**查询机器人导航状态**

**请求**

- 编号: 1020 (0x03FC)
- 名称: robot\_status\_task\_req
- 描述: 查询机器人当前的导航状态, 导航站点, 导航相关路径(已经经过的站点, 尚未经过的站点)等
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|simple|boolean|是否只返回简单数据, true = 是，false = 否，缺省则为否|是|

**请求示例**


```Plaintext
5A 01 00 01 00 00 00 00 03 FC 00 00 00 00 00 00```


```Plaintext
// 只返回简单数据
// {"simple":true}
5A 01 00 01 00 00 00 0F 03 FC 00 00 00 00 00 00
7B 22 73 69 6D 70 6C 65 22 3A 74 72 75 65 7D```

**响应**

- 编号: 11020 (0x2B0C)
- 名称: robot\_status\_task\_req
- 描述: 查询机器人当前的导航状态的响应
- JSON 数据区: 见下表


```如果响应数据区的 JSON Object 中有 API 中未提到的 key-value 键值对，可以直接忽略，无须关注其含义，下文不再赘述```


```如果只返回简单数据，则下表的字段中只有 task\_status```


```字段名|类型|描述|可缺省``` :- | :- | :- |
|<p>task\_status</p><p></p>|number|0 = NONE, 1 = WAITING(目前不可能出现该状态), 2 = RUNNING, 3 = SUSPENDED, 4 = COMPLETED, 5 = FAILED, 6 = CANCELED|是|
|task\_type|number|导航类型, 0 = 没有导航, 1 = 自由导航到任意点, 2 = 自由导航到站点, 3 = 路径导航到站点, 7 = 平动转动, 100 = 其他|是|
|<p>target\_id</p><p></p>|string|当前导航要去的站点, 仅当 task\_type 为 2 或 3 时该字段有效, task\_status 为 RUNNING 时说明正在去这个站点, task\_status 为 COMPLETED 时说明已经到达这个站点, task\_status 为 FAILED 时说明去这个站点失败, task\_status 为 SUSPENDED 则说明去这个站点的导航暂停|是|
|target\_point|array[number]|当前导航要去的坐标点, 为一个包含三个元素的数组, 分别为在世界坐标系中的 x, y, r 坐标, 仅当 task\_type 为 1 时该字段有效, task\_status 为 RUNNING 时说明正在去这个坐标点, task\_status 为 COMPLETED 时说明已经到达这个坐标点, task\_status 为 FAILED 时说明去这个坐标点失败, task\_status 为 SUSPENDED 则说明去这个坐标点的导航暂停|是|
|finished\_path|array[string]|当前导航路径上已经经过的站点, 为站点的数组, 仅当 task\_type 为 3 时该字段有效点。这里会列出所有已经经过的中间点|是|
|unfinished\_path|array[string]|当前导航路径上尚未经过的站点, 为站点的数组, 仅当 task\_type 为 3 时该字段有效。这里会列出所有尚未经过的中间点|是|
|move\_status\_info|string|导航任务附加信息|是|
|containers|object array|料箱状态（只针对料箱机器人有意义）|是|
|ret\_code|number|API 错误码|是|
|create\_on|string|API 上传时间戳|是|
|err\_msg|string|错误信息|是|

**响应示例**

如下数据表示机器人正在使用路径导航的方式去 id 为 "LM6" 的站点, 已经经过的站点为 LM1, LM2, LM3, 尚未经过的站点为 LM4, LM5, LM6


```JSON
{
        "task\_status": 2,
        "task\_type": 3,
        "target\_id": "LM1",
        "finished\_path": [
                "LM1",
                "LM2",
                "LM3"
        ],
        "unfinished\_path": [
                "LM4",
                "LM5",
                "LM6"
        ],
        "containers": [{
                "container\_name": "1",
                "desc": "first good",
                "goods\_id": "good1",
                "has\_goods": true
        }, {
                "container\_name": "2",
                "desc": "",
                "goods\_id": "",
                "has\_goods": false
        }]
}```

如果只返回简单数据(数据区只有17个字符)：


```JSON
{"task\_status":4}```


