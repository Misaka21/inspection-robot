![...](..\..\TCP-IP%20API\机器人推送API\images\机器人推送.001.png)

**机器人推送**






```<p>注意：</p><p>该 API 用于机器人主动推送数据到所连接的客户端。</p>```


```如果响应数据区的 JSON Object 中有 API 中未提到的 key-value 键值对，可以直接忽略，无须关注其含义，下文不再赘述。```

- 编号: 19301 (0x4B65)
- 名称: robot\_push
- 描述: 机器人数据推送
- JSON 数据区: 见下表

```**字段名**|**类型**|**描述**|**可缺省**``` :- | :- | :- |
|controller\_temp|number|控制器温度, 单位 ℃|是|
|x|number|机器人的 x 坐标, 单位 m|是|
|y|number|机器人的 y 坐标, 单位 m|是|
|angle|number|机器人的 angle 坐标, 单位 rad|是|
|<p>current\_station</p><p></p>|<p>string</p><p></p>|<p>离机器人最近站点的 id（该判断比较严格，机器人必须很靠近某一个站点，这个距离可以通过参数配置中的 CurrentPointDist</p><p>修改，默认为 0.3m。如果机器人与所有站点的距离大于这个距离，则这个字段为空字符。如果想要获取上一个完成任务的站点，可以取 finished\_path 数组中的最后一个元素）</p><p>![...](..\..\TCP-IP%20API\机器人推送API\images\机器人推送.002.png)</p><p>注意：上图这个例子中，机器人从AP1到AP2，中间靠近AP3时，current\_station会返回3。</p>|是|
|vx|number|机器人在机器人坐标系的 x 方向实际的速度, 单位 m/s|是|
|vy|number|机器人在机器人坐标系的 y 方向实际的速度, 单位 m/s|是|
|w|number|机器人在机器人坐标系的实际的角速度(即顺时针转为负, 逆时针转为正), 单位 rad/s|是|
|steer|number|单舵轮机器人当前的舵轮角度, 单位 rad|是|
|blocked|boolean|机器人是否被阻挡|是|
|battery\_level|number|<p>机器人电池电量,</p><p>范围 [0, 1]</p>|是|
|charging|boolean|电池是否正在充电|是|
|emergency|boolean|true 表示急停按钮处于激活状态(按下), false 表示急停按钮处于非激活状态(拔起)|是|
|DI|array[Object]|id: 对应的 id 号<br>source: 来源<br>normal = 普通 DI<br>virtual = 虚拟 DI<br>modbus = modbus DI<br>status: 表示高低电平<br>true = 高电平<br>false = 低电平<br>valid: 对应 DI 是否启用<br>true = 启用<br>false = 禁用|是|
|DO|array[Object]|id: 对应的 id 号<br>source: 来源<br>normal = 普通 DO<br>modbus = modbus DO<br>status: 表示高低电平<br>true = 高电平<br>false = 低电平|是|
|<p>fatals</p><p></p>|array[Object]|<p>[报警码 Fatal](..\机器人状态API\查询机器人报警状态.md)</p><p>的数组, 所有出现的 Fatal 报警都会出现在数据中</p>|是|
|errors|array[Object]|<p>[报警码 Error](..\机器人状态API\查询机器人报警状态.md)</p><p>的数组, 所有出现的 Error 报警都会出现在数据中</p>|是|
|warnings|array[Object]|<p>[报警码 Warning](..\机器人状态API\查询机器人报警状态.md)</p><p>的数组, 所有出现的 Warning 报警都会出现在数据中</p>|是|
|notices|array[Object]|<p>[Notice](..\机器人状态API\查询机器人报警状态.md)</p><p>的数组, 所有出现的 Notice 报警都会出现在数据中</p>|<p>是</p><p></p>|
|current\_map|string|当前地图名|是|
|vehicle\_id|string|机器人名称|是|
|create\_on|string|时间戳（2020-10-28T14:29:32.153Z）|是|
|requestVoltage|double|请求充电的电压。这两个变量是驼峰命名的，先不要改，为了兼容旧版程序|叉车不可缺省|
|requestCurrent|double|<p>请求充电的电流</p><p></p>|叉车不可缺省|
|brake|boolean|是否抱闸|是|
|soft\_emc|boolean|是否处于软急停状态|是|
|task\_status\_package|object|返回机器人上个已完成任务和所有未完成任务(包括失败任务)的列表，参考19204查询 API [1110](..\机器人状态API\查询机器人任务状态.md)|是|
|map|object|内部(seed)使用，详见地图 userData|是|
|~~charge\_spot~~|~~object~~|<p>~~叉车自动充电桩状态数据~~</p><p></p>|~~叉车不可缺省~~（3.4.0.0版本后删除）|
|<p>reloc\_status</p><p></p>|number|<p>0 = RELOC\_INIT(重定位初始化中)</p><p>1 = RELOC\_SUCCESS(重定位成功)</p><p>2 = RELOC\_RELOCING(正在重定位)</p><p>3=LOADMAP\_LOADING(地图载入中)</p>|是|
|loadmap\_status|number|0 = FAILED(载入地图失败),<br>1 = SUCCESS(载入地图成功),<br>2 = LOADING(正在载入地图)|是|
|slam\_status|number|<p>0 = 没有扫图,<br>1 = 正在扫图(离线),<br>2 = 正在实时扫图(SLAM)</p><p>3 = 正在3D扫图（离线）</p><p>4 = 正在实时3D扫图</p>|是|
|robot\_note|string|机器人备注|是|
|current\_map\_md5|string|<p>当前地图 MD5 值</p><p></p>|是|
|current\_lock|object|查询当前控制权所有者，参见 [1060](..\机器人状态API\查询当前控制权所有者.md)|是|
|confidence|number|机器人的定位置信度, 范围 [0, 1]|是|
|loc\_state|number|0 = Normal<br>1 = Skidding<br>2 = LowConfidence|是|
|update\_reason|number|0 = None<br>1 = OdoUpdate<br>2 = LaserCorrec<br>3 = LaserThenOdo|是|
|battery\_temp|number|机器人电池温度, 单位 ℃|是|
|battery\_user\_data|string|电池用户自定义数据|是|
|battery\_cycle|number|电池循环次数(从电池 BMS 获取，不保证正确)|是|
|voltage|number|电压, 单位 V|是|
|current|number|电流, 单位 A|是|
|r\_vx|number|机器人在机器人坐标系的 x 方向接收到的速度, 单位 m/s|是|
|r\_vy|number|机器人在机器人坐标系的 y 方向收到的速度, 单位 m/s|是|
|r\_w|number|机器人在机器人坐标系的收到的角速度(即顺时针转为负, 逆时针转为正), 单位 rad/s|是|
|r\_steer|number|单舵轮机器人收到的舵轮角度, 单位 rad|是|
|r\_spin|number|托盘机器人的收到托盘（如果存在）转动速度, 单位 rad/s|是|
|r\_steer\_angles|array[number]|多舵轮机器人收到的舵角角度, 双舵轮=[前舵轮角度，后舵轮角度], 单位 rad|是|
|tasklist\_status|object|任务链状态json object，详情见 [3101](..\机器人导航API\查询机器人任务链.md)|是|
|odo|number|累计行驶里程, 单位 m|是|
|today\_odo|number|今日累计行驶里程, 单位 m|是|
|time|number|本次运行时间(开机后到当前的时间), 单位 ms|是|
|total\_time|number|累计运行时间, 单位 ms|是|
|spin|number|机器人的托盘（如果存在）角度, 单位 rad|是|
|motor\_info|array[Object]|电机状态信息，详情见 [1040](..\机器人状态API\查询电机状态信息.md)|是|
|is\_stop|boolean|机器人底盘是否静止（行走电机）|是|
|steer\_angles|array[number]|多舵轮机器人当前的舵角角度, 双舵轮或多舵轮角度顺序按照模型文件中的顺序排序, 单位 rad|是|
|user\_objects|object|机器人障碍物|是|
|fork|object|货叉相关状态，详见 [1028](..\机器人状态API\查询货叉(叉车)状态.md)|是|
|move\_status\_info|string|导航任务附加信息|是|
|area\_ids|array[string]|机器人所在区域 id 的数组(由于地图上的区域是可以重叠的, 所以机器人可能同时在多个区域)，数组可能为空|是|
|block\_x|number|最近障碍物位置的 x 坐标, 单位 m|是|
|block\_y|number|最近障碍物位置的 y 坐标, 单位 m|是|
|block\_reason|number|被阻挡的原因,<br>0 = Ultrasonic (超声),<br>1 = Laser (激光),<br>2 = Fallingdown (防跌落传感器),<br>3 = Collision (碰撞传感器),<br>4 = Infrared (红外传感器),<br>5 =  Lock（锁车开关），<br>6 = 动态障碍物，<br>7 = 虚拟激光点，<br>8 = 3D 相机，<br>9 = 距离传感器，<br>10 = DI 超声|是|
|block\_id|number|发生阻挡的 id 号,  仅当 block\_reason = 0、2、3、4、9、10 时有意义<br>3.2.8.0 新增|是|
|slowed|boolean|机器人是否减速|是|
|slow\_x|number|最近的导致减速的障碍物位置的 x 坐标, 单位 m|是|
|slow\_y|number|最近的导致减速的障碍物位置的 y 坐标, 单位 m|是|
|<p>slow\_reason</p><p></p>|number|减速的原因,<br>0 = Ultrasonic (超声),<br>1 = Laser (激光),<br>2 = Fallingdown (防跌落传感器),<br>3 = Collision (碰撞传感器),<br>4 = Infrared (红外传感器),<br>5 =  Lock（锁车开关），<br>6 = 动态障碍物，<br>7 = 虚拟激光点，<br>8 = 3D 相机，<br>9 = 距离传感器，<br>10 = DI 超声|是|
|slow\_id|number|发生减速的 id 号,  仅当 slow\_reason = 0、2、3、4、9、10 时有意义<br>3.2.8.0 新增|是|
|task\_status|number|0 = NONE,<br>1 = WAITING(目前不可能出现该状态),<br>2 = RUNNING,<br>3 = SUSPENDED,<br>4 = COMPLETED,<br>5 = FAILED,<br>6 = CANCELED|是|
|task\_type|number|导航类型, 0 = 没有导航, 1 = 自由导航到任意点, 2 = 自由导航到站点, 3 = 路径导航到站点, 7 = 平动转动, 100 = 其他|是|
|target\_dist|number|剩余路径曲线的总长，m|是|
|target\_id|string|当前导航要去的站点, 仅当 task\_type 为 2 或 3 时该字段有效, task\_status 为 RUNNING 时说明正在去这个站点, task\_status 为 COMPLETED 时说明已经到达这个站点, task\_status 为 FAILED 时说明去这个站点失败, task\_status 为 SUSPENDED 则说明去这个站点的导航暂停|是|
|target\_point|array[number]|当前导航要去的坐标点, 为一个包含三个元素的数组, 分别为在世界坐标系中的 x, y, r 坐标, 仅当 task\_type 为 1 时该字段有效, task\_status 为 RUNNING 时说明正在去这个坐标点, task\_status 为 COMPLETED 时说明已经到达这个坐标点, task\_status 为 FAILED 时说明去这个坐标点失败, task\_status 为 SUSPENDED 则说明去这个坐标点的导航暂停|是|
|finished\_path|array[string]|当前导航路径上已经经过的站点, 为站点的数组, 仅当 task\_type 为 3 或 4 时该字段有效点。这里会列出所有已经经过的中间点|是|
|unfinished\_path|array[string]|当前导航路径上尚未经过的站点, 为站点的数组, 仅当 task\_type 为 3 或 4 时该字段有效。这里会列出所有尚未经过的中间点|是|
|~~roller~~|~~object~~|~~辊筒相关状态，详见 [1029~~](..\机器人状态API\查询辊筒（皮带）状态.md)~~（改为通过[机器人推送](https://seer-group.feishu.cn/wiki/NiCfwLVV6iJYiCkJEHEc0fncnah?fromScene=spaceOverview#share-GMANdmpfxoGbl3xFkMTc2iRgnqh)API中的的moveStatusInfo字段获取）|~~是~~|
|~~jack~~|~~object~~|~~顶升相关状态，详见 [1027~~](..\机器人状态API\查询顶升机构状态.md)~~（改为通过[机器人推送](https://seer-group.feishu.cn/wiki/NiCfwLVV6iJYiCkJEHEc0fncnah?fromScene=spaceOverview#share-GMANdmpfxoGbl3xFkMTc2iRgnqh)API中的的moveStatusInfo字段获取）|~~是~~|
|yaw|number|偏航角，单位：rad|是|
|roll|number|滚转角，单位：rad|是|
|pitch|number|俯仰角，单位：rad|是|
|rfids|array[number]|扫描到的所有 RFID 标签 id, 如果没扫描到 RFID 标签, 则为空数组|是|
|hook|object|勾爪相关状态|是|
|pgvs|array[Object]|二维码识别数据, 数据示例见 [1017](..\机器人状态API\查询二维码数据(PGV).md)|是|
|peripheral\_data|array[number]|外设中的用户自定义数据|是|
|calib\_status|object|机器人标定|是|
|driver\_emc|boolean|true 表示电机驱动器发生急停, false 表示电机驱动器发生未急停|是|
|src\_release|boolean|SRC 监听模式|是|
|controller\_humi|number|控制器湿度, 单位 %|是|
|controller\_voltage|number|控制器电压, 单位 V|是|
|manual\_charge|boolean|仅指示机器人是否连接手动充电器，不保证电源是否接通，连接手动充电器时不能运动(仅 SRC-2000 支持)|是|
|auto\_charge|boolean|仅指示机器人是否连接自动充电桩，不保证电源是否接通(仅 SRC-2000 支持)|<p>是</p><p></p>|
|electric|boolean|true 表示继电器开启, false 表示继电器关闭|是|
|ssid|string|当前连接 Wifi 的 SSID（机器人需要支持连接 Wifi 并且已经连接，否则为空）|是|
|rssi|number|当前连接 Wifi 的信号强度，0-100 百分比（机器人需要支持连接 Wifi 并且已经连接，否则为0）|是|
|ap\_addr|string|当前连接的AP的mac地址|是|
|<p>loc\_method</p><p></p>|<p>number</p><p></p>|0 = 自然轮廓定位<br>1 = 反光柱定位<br>2 = 二维码定位<br>3 = 里程计模式<br>4 = 3D 定位<br>5 = 天码定位<br>6 = 特征定位<br>7 = 3D 特征定位<br>8 = 3D KF定位|是|


