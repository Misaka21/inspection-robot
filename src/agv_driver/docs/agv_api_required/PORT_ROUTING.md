# AGV API 端口路由表（inspection-robot）

## 1. 总规则

- 功能目录分组（`00~04`）仅用于阅读。
- 真正通信时，必须按**命令号**选择端口。
- 命令号发错端口会返回协议错误（如 `60000/60001` 一类错误）。

## 2. 本项目用到的命令号与端口

| 端口 | API 类别 | 命令号 | 说明 |
| --- | --- | --- | --- |
| `19204` | 机器人状态 | `1004` | 查询机器人位置 |
| `19204` | 机器人状态 | `1005` | 查询机器人速度 |
| `19204` | 机器人状态 | `1006` | 查询被阻挡状态 |
| `19204` | 机器人状态 | `1007` | 查询电池状态 |
| `19204` | 机器人状态 | `1012` | 查询急停状态 |
| `19204` | 机器人状态 | `1020` | 查询导航状态 |
| `19204` | 机器人状态 | `1021` | 查询定位状态 |
| `19204` | 机器人状态 | `1022` | 查询地图载入状态 |
| `19204` | 机器人状态 | `1050` | 查询报警状态 |
| `19204` | 机器人状态 | `1060` | 查询控制权所有者 |
| `19204` | 机器人状态 | `1110` | 查询任务状态 |
| `19205` | 机器人控制 | `2000` | 停止开环运动 |
| `19205` | 机器人控制 | `2002` | 重定位 |
| `19205` | 机器人控制 | `2004` | 取消重定位 |
| `19205` | 机器人控制 | `2010` | 开环运动 |
| `19205` | 机器人控制 | `2022` | 切换地图 |
| `19206` | 机器人导航 | `3001` | 暂停导航 |
| `19206` | 机器人导航 | `3002` | 继续导航 |
| `19206` | 机器人导航 | `3003` | 取消导航 |
| `19206` | 机器人导航 | `3051` | 路径导航 |
| `19206` | 机器人导航 | `3066` | 指定路径导航 |
| `19206` | 机器人导航 | `3067` | 清除指定导航路径 |
| `19207` | 机器人配置 | `4005` | 抢占控制权 |
| `19207` | 机器人配置 | `4006` | 释放控制权 |
| `19207` | 机器人配置 | `4009` | 清错 |
| `19207` | 机器人配置 | `4091` | 配置机器人推送端口（配置 API） |
| `19210` | 其他 API | `6004` | 软急停 |
| `19301` | 推送 API | `9300` | 配置推送字段/周期（推送 API，部分版本） |
| `19301` | 推送 API | `19301` | 机器人主动推送消息类型 |

## 3. 实现建议（避免踩坑）

1. 在代码中维护固定映射：`cmd_type -> port`。  
2. 发包前先校验命令号归属端口，失败立即拒绝。  
3. `19301` 推送连接单独管理，不和请求响应连接复用。  
4. 推送配置命令若同时支持 `4091` 与 `9300`，需按固件/协议版本切换。  
