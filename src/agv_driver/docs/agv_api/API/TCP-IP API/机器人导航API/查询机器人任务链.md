![...](..\..\TCP-IP%20API\机器人导航API\images\查询机器人任务链.001.png)

**查询机器人任务链**

**请求**

- 编号: 3101 (0x0C1D)
- 名称: robot\_tasklist\_status\_req
- 描述: 查询机器人任务链
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|with\_robot\_status|boolean|如果为 true ，返回机器人状态数据，目前状态数据里，只有电量信息|是|
|task\_list\_name|string|需要查询的任务链名称，该任务链为最近一次执行过（执行中）的任务链。如果能查询到这个任务链，则返回详情，如果没有，则 taskListStatus 返回404|是|

**请求示例**


```JSON
{"task\_list\_name":"task\_20210428203859635","with\_robot\_status":false}
// 查询名为task\_20210428203859635的任务链信息，
// task\_20210428203859635可能是上一次关机前最后执行的任务链，
// 也可能是当前正在执行的任务链
5A 01 00 01 00 00 00 48 0C 1D 00 00 00 00 00 00 
7B 22 74 61 73 6B 5F 6C 69 73 74 5F 6E 61 6D 65 
22 3A 20 22 74 61 73 6B 5F 32 30 32 31 30 34 32 
38 32 30 33 38 35 39 36 33 35 22 2C 20 22 77 69 
74 68 5F 72 6F 62 6F 74 5F 73 74 61 74 75 73 22 
3A 20 66 61 6C 73 65 7D```

**响应**

- 编号: 13101 (0x332D)
- 名称: robot\_tasklist\_status\_res
- 描述: 查询机器人任务链的响应
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|tasklist\_status|object|任务链状态json object，详情见下表|是|
|robot\_status|object|机器人状态json object，目前只包括电量信息|否|
|ret\_code|number|API 错误码|是|
|create\_on|string|API 上传时间戳|是|
|err\_msg|string|错误信息|是|


```字段名|类型|描述|可缺省``` :- | :- | :- |
|taskListName|string|任务链名称|是|
|taskListStatus|number|任务链状态<br>0 = StatusNone<br>1 = Waiting<br>2 = Running<br>3 = Suspended<br>4 = Completed<br>5 = Failed<br>6 = Canceled<br>7 = OverTime|是|
|loop|bool|循环执行|否|
|actionGroupId|number|并行工作组动作下标|是|
|actionIds|array[number]|动作id列表|否|

**响应示例**


```JSON
{
  "create\_on": "2021-04-29T17:02:10.561Z",
  "ret\_code": 0,
  "tasklist\_status": {
    "actionGroupId": 0,
    "actionIds": [
      0
    ],
    "loop": true,
    "taskId": 0,
    "taskListName": "task\_20210428203859635",
    "taskListStatus": 2
  }
}```


```Plaintext
5A 01 00 01 00 00 00 BD 33 2D 0C 1D 00 00 00 00 
7B 22 63 72 65 61 74 65 5F 6F 6E 22 3A 22 32 30 
32 31 2D 30 34 2D 32 39 54 31 37 3A 30 33 3A 31 
30 2E 31 35 33 5A 22 2C 22 72 65 74 5F 63 6F 64 
65 22 3A 30 2C 22 74 61 73 6B 6C 69 73 74 5F 73 
74 61 74 75 73 22 3A 7B 22 61 63 74 69 6F 6E 47 
72 6F 75 70 49 64 22 3A 30 2C 22 61 63 74 69 6F 
6E 49 64 73 22 3A 5B 30 5D 2C 22 6C 6F 6F 70 22 
3A 74 72 75 65 2C 22 74 61 73 6B 49 64 22 3A 30 
2C 22 74 61 73 6B 4C 69 73 74 4E 61 6D 65 22 3A 
22 74 61 73 6B 5F 32 30 32 31 30 34 32 38 32 30 
33 38 35 39 36 33 35 22 2C 22 74 61 73 6B 4C 69 
73 74 53 74 61 74 75 73 22 3A 32 7D 7D```


