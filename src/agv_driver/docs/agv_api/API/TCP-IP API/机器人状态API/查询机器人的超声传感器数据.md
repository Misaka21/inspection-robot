![...](..\..\TCP-IP%20API\机器人状态API\images\查询机器人的超声传感器数据.001.png)

**查询机器人的超声传感器数据**

**请求**

- 编号: 1016 (0x03F8)
- 名称: robot\_status\_ultrasonic\_req
- 描述: 查询机器人的超声传感器数据
- JSON 数据区: 无

**请求示例**


```Plaintext
5A 01 00 01 00 00 00 00 03 F8 00 00 00 00 00 00```

**响应**

- 编号: 11016 (0x2B08)
- 名称: robot\_status\_ultrasonic\_res
- 描述: 查询机器人的超声传感器数据的响应
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|ultrasonic\_nodes|array[object]|超声节点数据, 数据示例见下文|是|
|ret\_code|number|API 错误码|是|
|create\_on|string|API 上传时间戳|是|
|err\_msg|string|错误信息|是|

object 形式如下:


```JSON
{
    "id": 0,      // 该超声节点的ID
    "dist": 0.2,  // 该超声感应到的距离(单位:米)
    "valid": true // 是否激活
}```

获得 id 和 dist 后需要根据模型文件中相应超声的配置来换算成世界坐标系中的值。

**响应示例**

如下为五个超声节点的数据:

```JSON
{
  "ultrasonic\_nodes": [
    {
      "id": 0,
      "dist": 0.1,
      "valid": true
    },
    {
      "id": 1,
      "dist": 0.12,
      "valid": true
    },
    {
      "id": 2,
      "dist": 0.14,
      "valid": false
    },
    {
      "id": 3,
      "dist": 0.16,
      "valid": true
    },
    {
      "id": 4,
      "dist": 0.03,
      "valid": false
    }
  ]
}```

为方便阅读，这里 JSON 数据采用了展开的形式, 实际使用中为减少数据流 JSON 数据区是紧凑的, 不会有多余的空格与换行, 后文中同理。

