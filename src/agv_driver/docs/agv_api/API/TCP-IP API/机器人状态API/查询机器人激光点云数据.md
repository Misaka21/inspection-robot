![...](..\..\TCP-IP%20API\机器人状态API\images\查询机器人激光点云数据.001.png)

**查询机器人激光点云数据**

**请求**

- 编号: 1009 (0x03F1)
- 名称: robot\_status\_laser\_req
- 描述: 查询机器人激光点云数据
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|return\_beams3D|boolean|是否返回多线激光数据，true = 返回，false = 不返回，缺省则为不返回|是|

**请求示例**


```Plaintext
5A 01 00 01 00 00 00 00 03 F1 00 00 00 00 00 00```

**响应**

- 编号: 11009 (0x2B01)
- 名称: robot\_status\_laser\_res
- 描述: 查询机器人激光点云数据的响应
- JSON 数据区: 见下表

```字段名|类型|描述|可缺省``` :- | :- | :- |
|lasers|array|激光点云数据, 数据示例见下文|是|
|ret\_code|number|API 错误码|是|
|create\_on|string|API 上传时间戳|是|
|err\_msg|string|错误信息|是|

**数据示例**

如下为三个激光点的数据:

```JSON
{
  "lasers": [
    {
      "beams": [
        {
          "angle": -90,
          "dist": 11.722,
          "is\_obstacle": false,
          "is\_virtual": false,
          "rssi": 220,
          "valid": true
        },
        {
          "angle": -89.5,
          "dist": 12.3252,
          "is\_obstacle": false,
          "is\_virtual": false,
          "rssi": 220,
          "valid": true
        },
        {
          "angle": -89,
          "dist": 11.7744,
          "is\_obstacle": false,
          "is\_virtual": false,
          "rssi": 220,
          "valid": true
        }
      ],
      "device\_info": {
        "device\_name": "laser\_sim",
        "max\_angle": 90,
        "max\_range": 20,
        "min\_angle": -90,
        "min\_range": 0,
        "pub\_step": 0.5,
        "real\_step": 0.5,
        "scan\_freq": 50,
        "time\_increment": 0
      },
      "header": {
        "data\_nsec": "1523965240342673100",
        "frame\_id": "/scan\_0",
        "pub\_nsec": "1523965240342673100",
        "seq": "0"
      },
      "install\_info": {
        "upside": true,
        "x": 0,
        "y": 0,
        "yaw": 0,
        "z": 0.34
      }
    }
  ]
}```

为方便阅读，这里 JSON 数据采用了展开的形式, 实际使用中为减少数据流 JSON 数据区是紧凑的, 不会有多余的空格与换行, 后文中同理。

**响应示例**


```JSON
{
  "lasers": [
    {
      "beams": [
        {
          "angle": -90,
          "dist": 2.762,
          "rssi": 44.5273,
          "valid": true
        },
        {
          "angle": -89.6143,
          "dist": 2.75,
          "rssi": 44.9334,
          "valid": true
        },
        {
          "angle": -89.1,
          "dist": 2.755,
          "rssi": 44.8016,
          "valid": true
        },
        {
          "angle": -88.5857,
          "dist": 2.747,
          "rssi": 44.7736,
          "valid": true
        },
        {
          "angle": -88.0714,
          "dist": 2.758,
          "rssi": 44.6627,
          "valid": true
        }
      ],
      "device\_info": {
        "device\_name": "laser",
        "max\_angle": 90,
        "max\_range": 30,
        "min\_angle": -90,
        "pub\_step": 0.5,
        "real\_step": 0.5,
        "scan\_freq": 30
      },
      "header": {
        "data\_nsec": "888484363086750",
        "frame\_id": "PepperlR2000-HD-TCP",
        "pub\_nsec": "888484363087000"
      },
      "install\_info": {
        "upside": true,
        "x": 0.3386,
        "z": 0.229
      },
      "use\_forLoc": true
    }
  ],
  "ret\_code": 0
}```


