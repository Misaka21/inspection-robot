![...](..\..\TCP-IP%20API\机器人状态API\images\查询机器人位置.001.png)

**查询机器人位置**

机器人在世界坐标系中的坐标

**请求**

- 编号: 1004 (0x03EC)
- 名称: robot\_status\_loc\_req
- 描述: 查询机器人位置
- JSON 数据区: 无

**请求示例**


```Plaintext
5A 01 00 01 00 00 00 00 03 EC 00 00 00 00 00 00```

**响应**

- 编号: 11004 (0x2AFC)
- 名称: robot\_status\_loc\_res
- 描述: 查询机器人位置的响应
- JSON 数据区: 见下表

```如果响应数据区的 JSON Object 中有 API 中未提到的 key-value 键值对，可以直接忽略，无须关注其含义，下文不再赘述```


```字段名|类型|描述|可缺省``` :- | :- | :- |
|x|number|机器人的 x 坐标, 单位 m|是|
|y|number|机器人的 y 坐标, 单位 m|是|
|angle|number|机器人的 angle 坐标, 单位 rad|是|
|confidence|number|机器人的定位置信度, 范围 [0, 1]|是|
|current\_station|string|<p>离机器人最近站点的 id（该判断比较严格，机器人必须很靠近某一个站点，这个距离可以通过参数配置中的 CurrentPointDist</p><p>修改，默认为 0.3m。如果机器人与所有站点的距离大于这个距离，则这个字段为空字符。如果想要获取上一个完成任务的站点，可以取 finished\_path 数组中的最后一个元素）</p><p>![...](..\..\TCP-IP%20API\机器人状态API\images\查询机器人位置.002.png)</p><p>注意：上图这个例子中，机器人从AP1到AP2，中间靠近AP3时，current\_station会返回3。</p>|是|
|last\_station|string|机器人上一个所在站点的 id|是|
|loc\_method|number|0 = 自然轮廓定位<br>1 = 反光柱定位<br>2 = 二维码定位<br>3 = 里程计模式<br>4 = 3D 定位<br>5 = 天码定位<br>6 = 特征定位<br>7 = 3D 特征定位<br>8 = 3D KF定位|是|
|ret\_code|number|API 错误码|是|
|create\_on|string|API 上传时间戳|是|
|err\_msg|string|错误信息|是|

**响应示例**


```JSON
{
  "angle": -0.0064,
  "confidence": 0.637,
  "x": 3.5069,
  "y": 0.0687,
  "current\_station": "LM1",
  "last\_station": "LM2"
}```


